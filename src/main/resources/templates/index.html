<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>DShare</title>
    <!--Import Google Icon Font-->
    <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link href="/webjars/materializecss/1.0.0/css/materialize.css" type="text/css" rel="stylesheet"
          media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

</head>

<body style="background: #f5f2f0">
<div class="container">

    <nav>
        <div class="nav-wrapper" style="background: #2bbbad ">
            <a href="" class="brand-logo">Hello,Learner</a>
        </div>
    </nav>
    <div class="row">

        <div class="input-field col s6 offset-s1">
            <input placeholder="搜索内容" id="first_name" type="text" class="validate">
        </div>
        <div class="input-field col s2">
            <a class="waves-effect waves-light btn">
                <i class="material-icons left">cloud</i>
                搜索</a>
        </div>
    </div>


    <div class="row">

        <div class="col s12 m6">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">卡片标题</span>
                    <p>我是一个很简单的卡片。我很擅长于包含少量的信息。我很方便，因为我只需要一个小标记就可以有效地使用。</p>
                </div>
                <div class="card-action">
                    <a href="#">这是一个链接</a>
                    <a href="#">这是一个链接</a>
                </div>
            </div>
        </div>
        <div class="col s12 m6">
            <div class="card blue-grey darken-1">
                <div class="card-content white-text">
                    <span class="card-title">卡片标题</span>
                    <p>我是一个很简单的卡片。我很擅长于包含少量的信息。我很方便，因为我只需要一个小标记就可以有效地使用。</p>
                </div>
                <div class="card-action">
                    <a href="#">这是一个链接</a>
                    <a href="#">这是一个链接</a>
                </div>
            </div>
        </div>


    </div>
    <!--    上传数据的小红按钮-->
    <div class="fixed-action-btn">
        <a class="btn-floating btn-large red">
            <i class="large material-icons"  onclick="  $('#modal1').modal('open');">note_add</i>
        </a>
    </div>

    <!-- 提交文件的表单 -->
    <div id="modal1" class="modal">
        <div class="modal-content">
            <h2>Share your Resource</h2>
            <form class="col s12">
                <div class="row">
                    <div class="input-field col s7">
                        <input placeholder="资源类型，如四六级" id="topic" type="text" class="validate">
                        <label for="first_name">资源类型，如四六级</label>
                    </div>
                    <div class="input-field col s12">
                        <input placeholder="简单描述内容，如四级必备单词" id="description" type="text" class="validate">
                        <label for="first_name">简单描述内容，如四级必备单词</label>
                    </div>
                </div>
                <input type="file" name="fileName1" id="fileName1"/>
                <div class="input-field col s2">
                    <a class="waves-effect waves-light btn">
                        <i class="material-icons left">cloud</i>
                        进行共享</a>
                </div>
            </form>


        </div>
        <div class="modal-footer">

        </div>
    </div>



</div>

<script src="/webjars/jquery/2.1.4/jquery.js"></script>
<script src="/webjars/materializecss/1.0.0/js/materialize.js"></script>
<script>
<!--    完成modal的初始化-->
    $(document).ready(function(){
        // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
        $('.modal').modal();
    });
</script>
<!--上传json数据-->
<script>
    function sendToUser(){ //在这里进行ajax 文件上传 用户的信息
        var $file1 = $("input[name='fileName1']").val();//用户文件内容(文件)
        // 判断文件是否为空
        if ($file1 == "") {
            alert("请选择上传的目标文件! ")
            return false;
        }
        //判断文件类型,我这里根据业务需求判断的是Excel文件
        var fileName1 = $file1.substring($file1.lastIndexOf(".") + 1).toLowerCase();
        if(fileName1 != "xls" && fileName1 !="xlsx"){
            alert("请选择Execl文件!");
            return false;
        }
        //判断文件大小
        var size1 = $("input[name='fileName1']")[0].files[0].size;
        if (size1>104857600) {
            alert("上传文件不能大于100M!");
            return false;
        }

        boo1 = true;
        var type = "file";
        var formData = new FormData();//这里需要实例化一个FormData来进行文件上传
        formData.append(type,$("#fileName1")[0].files[0]);
        $.ajax({
            type : "post",
            url : "uploadToFile",
            data : formData,
            processData : false,
            contentType : false,
            success : function(data){
                if (data=="error") {
                    alert("文件提交失败!");
                }else{
                    $("input[name='userUrl']").val(data);
                    alert("文件上传成功!");
                }}
        });
    }

</script>


</body>
</html>
